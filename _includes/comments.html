async function submitComment() {
  const formData = {
    name: document.getElementById('comment-name').value,
    email: document.getElementById('comment-email').value,
    comment: document.getElementById('comment-content').value,
    postUrl: window.location.pathname
  };

  try {
    await fetch('/.netlify/functions/submit-comment', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(formData)
    });

    // Clear form and reload comments
    document.getElementById('comment-content').value = '';
    loadComments();
  } catch (error) {
    console.error('Error:', error);
  }
}

async function loadComments() {
  try {
    const response = await fetch(`/.netlify/functions/get-comments?postUrl=${encodeURIComponent(window.location.pathname)}`);
    const comments = await response.json();

    const container = document.querySelector('.comment-list');
    container.innerHTML = comments.map(comment => `
      <div class="comment">
        <h4>${comment.name}</h4>
        <p>${comment.comment}</p>
        <small>${new Date(comment.date).toLocaleDateString()}</small>
      </div>
    `).join('');
  } catch (error) {
    console.error('Error loading comments:', error);
  }
}
